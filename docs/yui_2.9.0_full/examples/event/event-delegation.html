<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>YUI Library Examples: Event Utility: Using Event Utility and Event Delegation to Improve Performance</title>

    

	<meta http-equiv="content-type" content="text/html; charset=utf-8">
    	<link rel="stylesheet" type="text/css" href="../../assets/yui-v=3.css" >
	<link rel="stylesheet" type="text/css" href="../../assets/dpSyntaxHighlighter.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/button/assets/skins/sam/button.css" />
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/yuiloader/yuiloader-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/dom/dom-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/event/event-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/selector/selector-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/event-delegate/event-delegate-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/element/element-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/button/button-min.js"></script>


<!--begin custom header content for this example-->
<style type="text/css">

#list li { 
	cursor: pointer;
}

#list li.selected {
	background-color: red;	
}

#list li.hover {
	background-color: yellow;
}

</style>


<!--end custom header content for this example-->


<style>
    #upgrade-yui, #tocWrapper > p {
        padding: 0 0 1em;
        margin: 0;
    }
    #upgrade-yui p {
        padding: 0.5em;
        margin: 0;
        background: #FAFFB7;
        color: #000;
        border: 1px solid #B6CDE1;
        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        font: 177% Helvetica, Arial, sans-serif;
        text-align: center;
        -moz-text-shadow: 1px 1px 0 #fff;
        -webkit-text-shadow: 1px 1px 0 #fff;
        text-shadow: 1px 1px 0 #fff;
        white-space: nowrap;
    }
    #upgrade-yui span {
        display: block;
    }
    #upgrade-yui span .recommend {
        color: #000;
        text-decoration: none;
        font-weight: bold;
    }
    #upgrade-yui p .recommend:hover {
        text-decoration: underline;
    }
</style>

</head>
<body id="yahoo-com" class="yui-skin-sam">
<div id="deprecatewrapper">
  <style>
    #deprecatemsg {
      background-color: #355E95;
      margin: 0px;
      padding: .8em;
      color: #FFF;
    }
    #deprecatemsg a {
      text-decoration: none;
      color: #F29752;
    }
    #deprecatemsg p {
      margin: .5em;
    }
    #deprecatemsg p.dep-hd {
      font-size: 177%;
    }

    #deprecatemsg p.dep-subhd,
    #deprecatemsg p.dep-details {
      font-size: 120%;
    }
  </style>
  <div id="deprecatemsg">
      <p class="dep-hd">YUI recommends <a href="http://yuilibrary.com/">YUI3</a>.</p>
      <p class="dep-subhd">YUI 2 has been <a href="http://www.yuiblog.com/blog/2011/04/13/announcing-yui-2-9-0/">deprecated</a> since 2011. This site acts as an archive for files and documentation.</p>
      <p class="dep-details">This <a href="http://yui.github.io/yui2/">documentation</a> is no longer maintained.</p>
  </div>
</div>
<div id="doc3" class="yui-t2">
<div id="hd">
	<div id="ygunav">
		<p><em>
			<a href="http://yuilibrary.com/">YUI Library Home</a> <i> - </i>	
			<a href="http://yui.github.io/yui2/">YUI2 Archives</a>
			</em>
		</p>
		<form action="http://search.yahoo.com/search" id="sitesearchform">
		<input name="vs" type="hidden" value="http://yui.github.io/yui2/">
		<div id="sitesearch">
			<label for="searchinput">Site Search: </label>
			<input type="text" id="searchinput" name="p">
			<input type="submit" value="Search" id="searchsubmit" class="ygbt">
		</div>
		</form>
	</div>

	
	<div id="pagetitle"><h1>YUI Library Examples: Event Utility: Using Event Utility and Event Delegation to Improve Performance</h1></div>
</div>
<div id="bd">


		
	
	<div id="yui-main">
		<div class="yui-b">
		  <div class="yui-ge">
			  <div class="yui-u first example">

    
	<div class="promo">
	<h1>Event Utility: Using Event Utility and Event Delegation to Improve Performance</h1>
	
	<div class="exampleIntro">
	<p>
Event delegation is a technique whereby you use a single event handler on a 
parent element to listen for interactions that affect the parent's descendant 
elements; because events on the descendant elements will bubble up to the 
parent, this can be a reliable and extremely efficient mitigation strategy for 
reducing the number of resource-consuming event handlers you have on any given 
page. (<a href="http://yuiblog.com/blog/2007/01/17/event-plan/">You can read 
more about Event Delegation in this YUIBlog article</a>.)
</p>
<p>
In the example below, mousing over an item in the list will change its 
background color to yellow.  Clicking an item will change its 
background color to red.  Because we're using event delegation, only one event 
listener is needed for each type of event (<code>click</code>, 
<code>mouseover</code>, and <code>mouseout</code>), regardless of the size of 
the list.  To illustrate this point, click the "Add Item" button to append more 
items to list.  An infinite number of items can be added to the list, and still 
just one <code>click</code>, <code>mouseover</code>, and <code>mouseout</code> 
event handler is required to highlight the items.
</p>			
	</div>	
					
	<div class="example-container module ">
			<div class="hd exampleHd">
			<p class="newWindowButton yui-skin-sam"><!--<span id="newWindowLinkx"><span class="first-child">--><a href="event-delegation_clean.html" target="_blank">View example in new window.</a><!--</span></span>-->		
		</div>		<div id="example-canvas" class="bd">
	
		
	<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->
	
	<div id="container">
	<ul id="list">
		<li id="li-1">List Item 1</li>
		<li id="li-2">List Item 2</li>
		<li id="li-3">List Item 3</li>
		<li id="li-4">List Item 4</li>
		<li id="li-5">List Item 5</li>
	</ul>
</div>
<button id="add-item">Add Item</button>

<script type="text/javascript">

(function() {

var Dom = YAHOO.util.Dom,
	Event = YAHOO.util.Event;

var onLIClick = function (event, matchedEl, container) {

	if (Dom.hasClass(matchedEl, "selected")) {
		Dom.removeClass(matchedEl, "selected");		
	}
	else {
		Dom.addClass(matchedEl, "selected");
	}

};

//	Use the "delegate" method to attach a "click" event listener to the 
//	container (<div id="container">).  The listener will only be called if the 
//	target of the click event matches the element specified via the CSS 
//	selector passed as the fourth argument to the delegate method.

Event.delegate("container", "click", onLIClick, "li");

var onLIMouseOver = function (event, matchedEl, container) {

	Dom.addClass(matchedEl, "hover");
};

var onLIMouseOut = function (event, matchedEl, container) {

	Dom.removeClass(matchedEl, "hover");
	
};


//	Use the "delegate" method to attach a mouseover and mouseout event listener 
//	to the container (<div id="container">).  The listener will only be called  
//	if the target of the click event matches the element specified via the CSS 
//	selector passed as the fourth argument to the delegate method.

Event.delegate("container", "mouseover", onLIMouseOver, "li");
Event.delegate("container", "mouseout", onLIMouseOut, "li");


//	Add a click event listener to the button that will add new items to the list
//	to illustrate that new items can be added and the existing click, mouseover,
//	and mouseout event listeners will apply to them as well.

Event.on("add-item", "click", function (event) {

	var list = Dom.get("list"),
		items = Dom.getChildren(list),
 		nItemNumber = (items.length + 1),
 		fragment = Dom.get("container").ownerDocument.createElement("div");
	
	fragment.innerHTML = '<li id ="li-'+ nItemNumber +'">List Item ' + nItemNumber + '</li>';

	list.appendChild(fragment.firstChild);
	
});

})();

</script>	
	<!--END SOURCE CODE FOR EXAMPLE =============================== -->
	
		
		</div>
		
	
	</div>			
	</div>
		
	<h2 class="first">Understanding Event Delegation</h2>

<p>
Event delegation refers to the use of a single event listener on a parent object 
to listen for events happening on its children (or deeper descendants).  Event 
delegation allows developers to be sparse in their application of event 
listeners while still reacting to events as they happen on highly specific 
targets.  This proves to be a key strategy for maintaining high performance in 
event-rich web projects, where the creation of hundreds of event listeners can 
quickly degrade performance.
</p>

<p>
This example illustrates the use of event delegation (via the 
<a href="../../event/index.html">Event Utility</a>) on  
<code>click</code>, <code>mouseover</code>, and <code>mouseout</code> events.  
The problem we will solve here involves reacting to <code>click</code>, 
<code>mouseover</code>, and <code>mouseout</code> events on list items.  As 
there can be many list items, we want to be frugal in applying event listeners. 
At the same time, we want to know exactly which <code>&lt;li&gt;</code> was 
involved in a <code>click</code>, <code>mouseover</code>, and 
<code>mouseout</code> event.
</p>

<p>
To do this, we'll rely on DOM event bubbling &mdash; the process by which an 
event progresses from its direct target up through the target's node ancestry 
until it reaches the <code>window</code> object.  The graphic below may help to 
illustrate the flow: In this case, we'll count on the fact that a click or a 
mouseover on (A) the text node <em>within</em> an <code>&lt;li&gt; </code> 
progresses to the <code>&lt;li&gt;</code> element itself (B), then to the 
<code>&lt;ul&gt;</code> element (C), and then to the list's parent 
<code>&lt;div&gt;</code> (D) and so on up the document:
</p>
<p><img src="assets/eventdelegation.gif"></p>


<h2>Getting Started</h2>
<p>
Because events flow this way, we can count on events happening to our 
<code>&lt;li&gt;s</code> bubbling up to our &lt;div&gt; whose ID attribute is 
&quot;container.&quot;
</p>
<p>
We'll start with some structural markup &mdash; a <code>&lt;div&gt;</code> 
containing a <code>&lt;ul&gt;</code> with 5 <code>&lt;li&gt;</code> children. 
</p>
<textarea name="code" class="HTML" cols="60" rows="1"><div id="container">
	<ul id="list">
		<li id="li-1">List Item 1</li>
		<li id="li-2">List Item 2</li>
		<li id="li-3">List Item 3</li>
		<li id="li-4">List Item 4</li>
		<li id="li-5">List Item 5</li>
	</ul>
</div></textarea>


<h2>Event Delegation Made Easy</h2>
<p>
The Event Utility makes using event delegation easy by providing a 
<code>delegate</code> method that enables the use of CSS selector 
syntax to define the descendants of the delegation container for which the 
event listener should be called.  <em>Note: Event's delegation functionality
is packaged separately in an event-delegate module, which itself requires the 
Selector Utility.</em>
</p>
<p>
To use the <code>delegate</code> method, pass the id of the element that is 
the delegation container as the first argument (in this case 
<code>&#60;div id="container"&#62;</code>).  The second argument is the 
type of event you want to delegate, and the third is the event listener.  The 
forth argument is a CSS selector that defines the descendant elements that must 
match the target of the event in order for the listener to be called.
</p>
<p>
First we'll add the event listener used to highlight each item when it is 
clicked.  As we're only really interested in clicks on <code>&lt;li&gt;</code>s, 
we'll specify a CSS selector of "li" as the fourth argument to the 
<code>delegate</code> method.  The element that matched the CSS selector 
will be passed as the second argument to the event listener.  The element 
that is the delegation container for the listener is passed as the third 
argument:
</p>
<textarea name="code" class="JScript" cols="60" rows="1">
(function() {

var Dom = YAHOO.util.Dom,
	Event = YAHOO.util.Event;

var onLIClick = function (event, matchedEl, container) {

	if (Dom.hasClass(matchedEl, "selected")) {
		Dom.removeClass(matchedEl, "selected");		
	}
	else {
		Dom.addClass(matchedEl, "selected");
	}

};

//	Use the "delegate" method to attach a "click" event listener to the 
//	container (<div id="container">).  The listener will only be called if the 
//	target of the click event matches the element specified via the CSS 
//	selector passed as the fourth argument to the delegate method.

Event.delegate("container", "click", onLIClick, "li");

})();
</textarea>

<p>
The same technique works for the <code>mouseover</code> and 
<code>mouseout</code> events as well.  
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
(function() {

var Dom = YAHOO.util.Dom,
	Event = YAHOO.util.Event;

var onLIMouseOver = function (event, matchedEl, container) {

	Dom.addClass(matchedEl, "hover");
};

var onLIMouseOut = function (event, matchedEl, container) {

	Dom.removeClass(matchedEl, "hover");
	
};


//	Use the "delegate" method to attach a mouseover and mouseout event listener 
//	to the container (<div id="container">).  The listener will only be called  
//	if the target of the click event matches the element specified via the CSS 
//	selector passed as the fourth argument to the delegate method.

Event.delegate("container", "mouseover", onLIMouseOver, "li");
Event.delegate("container", "mouseout", onLIMouseOut, "li");

})();</textarea>

<p>
In this example, we've used three event listeners with their associated memory 
and performance load to serve as delegates for the same three events on each 
item in the list.  Instead of 3 event listeners per item, we now have three 
on the container.  And 
the code works regardless of the number of <code>li</code>'s added to the list 
&mdash; if the list was 100 items long, we'd be saving ourselves 297 event 
listeners, which is enough to make a noticable difference in how your page 
responds.  In a complicated page context, it's easy to see how this technique 
can dramatically reduce the number of event listeners required and thereby 
improve the performance of your application.
</p>



<p></p>

				</div>
				<div class="yui-u">
						<div id="loggerModule" class="yui-skin-sam">
						<h3 class="firstContent">YUI Logger Output:</h3>
								<div id="loggerGloss"><p><strong>Note:</strong> Logging and debugging is currently turned off for this example.</p> 
							<p class="loggerButton"><span id="loggerLink"><span class="first-child"><a href="event-delegation_log.html">Reload with logging<br />
	 and debugging enabled.</a></span></span></p></div>
	
						</div>
					
				
					<div id="examples">
						<h3>Event Utility Examples:</h3>
	
						<div id="exampleToc">
							<ul>
								<li><a href='eventsimple.html'>Simple Event Handling and Processing</a></li><li><a href='custom-event.html'>Using Custom Events</a></li><li><a href='event-timing.html'>Using onAvailable, onContentReady, and onDOMReady</a></li><li class='selected'><a href='event-delegation.html'>Using Event Utility and Event Delegation to Improve Performance</a></li><li><a href='event-focus-blur.html'>Skinning via Progressive Enhancement using the Event Utility and the YUILoader</a></li><li><a href='../container/keylistener.html'>Implementing Container Keyboard Shortcuts with KeyListener (included with examples for Container Family)</a></li><li><a href='../container/container-ariaplugin.html'>Using the Container ARIA Plugin (included with examples for Container Family)</a></li>							</ul>
						</div>
					</div>
					
					<div id="module">
						<h3>More Event Utility Resources:</h3>
						<ul>
							<li><a href="../../event/index.html">User's Guide</a></li>
						<li><a href="../../docs/module_event.html">API Documentation</a></li>
                            
                            
							<li><a href="http://yuiblog.com/assets/pdf/cheatsheets/event.pdf">Cheat Sheet PDF</a></li></ul>
					</div>
			  </div>
		</div>
		
		</div>
	</div>


	
<div class="yui-b" id="tocWrapper">

<p><strong>All YUI 2.x users should review the <a href="http://yuilibrary.com/support/2.8.2/">YUI 2.8.2 security bulletin</a>, which discusses a vulnerability present in YUI 2.4.0-2.8.1.</strong></p>

<!-- TABLE OF CONTENTS -->

<div id="toc">
<ul>
<li class="sect first">YUI Library</li><li class="item"><a title="The Yahoo! User Interface Library (YUI)" href="http://yuilibrary.com/">YUI Home</a></li><li class="item"><a title="YUI 3 -- more powerful, more secure, faster, easier to use." href="http://yuilibrary.com">YUI 3</a></li><li class="item"><a title="The Yahoo! User Interface Blog" href="http://yuiblog.com">YUIBlog</a></li><li class="item"><a title="Reporting Bugs and Making Feature Requests for YUI Components" href="http://yuilibrary.com/yui/docs/tutorials/report-bugs/">Bug Reports/Feature Requests</a></li><li class="item"><a title="The YUI Library source can be checked out from GitHub" href="http://github.com/yui/">YUI on GitHub</a></li><li class="item"><a title="YUI is free and open, offered under a BSD license." href="http://yuilibrary.com/license/">YUI License</a></li><li class="sect">YUI 2.x Resources</li><li class="item"><a title="YUI 2 -- deprecated. Use YUI3 instead." href="http://yui.github.io/yui2/">YUI 2 Archives</a></li><li class="selected "><a title="Examples of every YUI utility and control in action" href="../index.html">YUI 2 Examples</a></li><li class="item"><a title="Instantly searchable API documentation for all of YUI 2." href="../../docs/index.html">YUI 2 API Docs</a></li><li class="item"><a title="YUILibrary.com hosts the YUI community forums" href="https://groups.google.com/forum/#!forum/yui-deprecated">YUI 2 Discussion Forums <img src='http://l.yimg.com/a/i/nt/ic/ut/bsc/post12_1.gif'></a></li><li class="sect">YUI Components</li><li class="item"><a title="The YUI Animation Utility" href="../../animation/index.html">Animation</a></li><li class="item"><a title="The YUI AutoComplete Control" href="../../autocomplete/index.html">AutoComplete</a></li><li class="item"><a title="The YUI Browser History Manager" href="../../history/index.html">Browser History Manager</a></li><li class="item"><a title="The YUI Button Control" href="../../button/index.html">Button</a></li><li class="item"><a title="The YUI Calendar Control" href="../../calendar/index.html">Calendar</a></li><li class="item"><a title="The YUI Carousel Control" href="../../carousel/index.html">Carousel</a></li><li class="item"><a title="The YUI Charts Control" href="../../charts/index.html">Charts</a></li><li class="item"><a title="The YUI Color Picker Control" href="../../colorpicker/index.html">Color Picker</a></li><li class="item"><a title="The YUI Connection Manager (AJAX)" href="../../connection/index.html">Connection Manager</a></li><li class="item"><a title="The YUI Container Family (Module, Overlay, Tooltip, Panel, Dialog, SimpleDialog)" href="../../container/index.html">Container</a></li><li class="item"><a title="The YUI Cookie Utility" href="../../cookie/index.html">Cookie</a></li><li class="item"><a title="The YUI DataSource Utility" href="../../datasource/index.html">DataSource</a></li><li class="item"><a title="The YUI DataTable Control" href="../../datatable/index.html">DataTable</a></li><li class="item"><a title="The YUI Dom Collection" href="../../dom/index.html">Dom</a></li><li class="item"><a title="The YUI Drag &amp; Drop Utility" href="../../dragdrop/index.html">Drag &amp; Drop</a></li><li class="item"><a title="The YUI Element Utility" href="../../element/index.html">Element</a></li><li class="item"><a title="The YUI Event Utility" href="../../event/index.html">Event</a></li><li class="item"><a title="The YUI Get Utility" href="../../get/index.html">Get</a></li><li class="item"><a title="The YUI ImageCropper Control" href="../../imagecropper/index.html">ImageCropper</a></li><li class="item"><a title="The YUI ImageLoader Utility" href="../../imageloader/index.html">ImageLoader</a></li><li class="item"><a title="The YUI JSON Utility" href="../../json/index.html">JSON</a></li><li class="item"><a title="The YUI Layout Manger" href="../../layout/index.html">Layout Manager</a></li><li class="item"><a title="The YUI Logger Control" href="../../logger/index.html">Logger</a></li><li class="item"><a title="The YUI Menu Control" href="../../menu/index.html">Menu</a></li><li class="item"><a title="The YUI Paginator" href="../../paginator/index.html">Paginator</a></li><li class="item"><a title="The YUI Profiler" href="../../profiler/index.html">Profiler</a></li><li class="item"><a title="The YUI ProfierViewer Control" href="../../profilerviewer/index.html">ProfilerViewer</a></li><li class="item"><a title="The YUI ProgressBar Control" href="../../progressbar/index.html">ProgressBar</a></li><li class="item"><a title="The YUI Resize Utility" href="../../resize/index.html">Resize</a></li><li class="item"><a title="The YUI Rich Text Editor" href="../../editor/index.html">Rich Text Editor</a></li><li class="item"><a title="The YUI Selector Utility" href="../../selector/index.html">Selector</a></li><li class="item"><a title="The YUI Slider Control" href="../../slider/index.html">Slider</a></li><li class="item"><a title="The YUI Storage Utility" href="../../storage/index.html">Storage</a></li><li class="item"><a title="The YUI StyleSheet Utility" href="../../stylesheet/index.html">StyleSheet</a></li><li class="item"><a title="The YUI Swf Utility" href="../../swf/index.html">SWF</a></li><li class="item"><a title="The YUI SwfStore Utility" href="../../swfstore/index.html">SWFStore</a></li><li class="item"><a title="The YUI TabView Control" href="../../tabview/index.html">TabView</a></li><li class="item"><a title="The YUI TreeView Control" href="../../treeview/index.html">TreeView</a></li><li class="item"><a title="The YUI Uploader Control" href="../../uploader/index.html">Uploader</a></li><li class="item"><a title="The YUI YAHOO Global Object" href="../../yahoo/index.html">Yahoo Global Object</a></li><li class="item"><a title="The YUI Loader Utility" href="../../yuiloader/index.html">YUI Loader</a></li><li class="item"><a title="The YUI Test Utility" href="../../yuitest/index.html">YUI Test</a></li><li class="item"><a title="YUI Reset CSS" href="../../reset/index.html">Reset CSS</a></li><li class="item"><a title="YUI Base CSS" href="../../base/index.html">Base CSS</a></li><li class="item"><a title="YUI Fonts CSS" href="../../fonts/index.html">Fonts CSS</a></li><li class="item"><a title="YUI Grids CSS" href="../../grids/index.html">Grids CSS</a></li></ul>
</div>
</div>

	<div id="ft">
        <p class="first">Copyright &copy; 2013 Yahoo! Inc. All rights reserved.</p>
        <p><a href="http://info.yahoo.com/privacy/us/yahoo/devel/details.html">Privacy Policy</a> - 
            <a href="http://docs.yahoo.com/info/copyright/copyright.html">Copyright Policy</a> - 
            <a href="http://careers.yahoo.com/">Job Openings</a></p>
	</div>
</div>

<script src="../../assets/dpSyntaxHighlighter.js"></script>
<script language="javascript"> 
dp.SyntaxHighlighter.HighlightAll('code'); 
</script>



<script src='../../assets/YUIexamples.js'></script>


</body>
</html>

<!-- SpaceID=0 robot -->

<!-- VER-3.0.235613 -->
<!-- doc1.ydn.gq1.yahoo.com compressed/chunked Tue Jul 30 21:13:02 PDT 2013 -->

<!-- Localized -->